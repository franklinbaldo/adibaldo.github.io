---
import { getCollection } from 'astro:content';
import BaseHead from '../../components/BaseHead.astro';
import Footer from '../../components/Footer.astro';
import Header from '../../components/Header.astro';
import { SITE_TITLE } from '../../consts';

const places = (await getCollection('places'))
	.sort((a, b) => (a.data.order ?? 999) - (b.data.order ?? 999));

const breadcrumbLD = {
	"@context": "https://schema.org",
	"@type": "BreadcrumbList",
	"itemListElement": [
		{
			"@type": "ListItem",
			"position": 1,
			"name": "Início",
			"item": Astro.site?.toString()
		},
		{
			"@type": "ListItem",
			"position": 2,
			"name": "Locais"
		}
	]
};
---

<!doctype html>
<html lang="pt-BR">
	<head>
		<BaseHead title={`Locais — ${SITE_TITLE}`} description="Os lugares que marcaram a vida do Adi — cada um com suas prosas e histórias." />
		<script type="application/ld+json" set:html={JSON.stringify(breadcrumbLD)} />
	</head>
	<body>
		<Header />

		<section class="hero">
			<div class="container hero-inner">
				<h1 style="font-size: clamp(34px, 4.5vw, 56px);">Locais da vida</h1>
				<p class="hero-kicker">
					Cada lugar guarda um pedaço. Aqui tu escolhe um rumo e vai puxando as prosas.
				</p>
			</div>
		</section>

		<main class="section">
			<div class="container">
				<div class="grid">
					{places.map((p) => (
						<a class="card" href={`/locais/${p.id}/`}>
							<div class="tag-row">
								<span class="tag">Local</span>
							</div>
							<h3 class="card-title">{p.data.title}</h3>
							<p class="card-desc">{p.data.summary}</p>
						</a>
					))}
				</div>
			</div>
		</main>

		<Footer />
	</body>
</html>
